<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Attendance Calculator</title>
<style>
  :root{
    --bg:#eef1f7;
    --card:#ffffff;
    --text:#2a2d34;
    --muted:#333;
    --input-bg:#fafafa;
    --input-border:#d6dae2;
    --accent:#4c7cf3;
    --result-bg:#eef2ff;
    --ad-bg:#e7e7e7;
    --ad-border:#b0b0b0;
    --bar-red:#e74c3c;
    --bar-yellow:#f1c40f;
    --bar-green:#2ecc71;
  }

  body.dark{
    --bg:#0e1117;
    --card:#161b22;
    --text:#e6e6e6;
    --muted:#e6e6e6;
    --input-bg:#1f242d;
    --input-border:#3a3f47;
    --accent:#4c7cf3;
    --result-bg:#1b2430;
    --ad-bg:#1e2a36;
    --ad-border:#3a4a57;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:"Segoe UI",Arial,Helvetica,sans-serif;
    background:var(--bg);
    color:var(--text);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    transition:background .25s,color .25s;
  }

  .container{
    width:100%;max-width:420px;background:var(--card);
    padding:24px;border-radius:14px;
    box-shadow:0 6px 26px rgba(0,0,0,.12);
    position:relative;
  }

  /* small floating toggle button */
  #themeToggle{
    position:absolute;
    top:14px;
    right:14px;
    width:38px;
    height:38px;
    border-radius:50%;
    border:none;
    font-size:20px;
    background:var(--card);
    color:var(--text);
    cursor:pointer;
    box-shadow:0 3px 10px rgba(0,0,0,.15);
    display:flex;
    align-items:center;
    justify-content:center;
    transition:background .25s,color .25s, transform .15s;
  }

  #themeToggle:hover{transform:scale(1.1)}

  h2{text-align:center;margin:14px 0 20px;font-size:22px;color:var(--text)}

  label{display:block;margin-top:10px;font-weight:600;color:var(--muted)}
  input[type=number]{
    width:100%;padding:12px;border-radius:12px;border:2px solid var(--input-border);
    margin-top:6px;background:var(--input-bg);font-size:15px;color:var(--text);
  }
  input[type=number]:focus{outline:none;box-shadow:0 0 6px rgba(76,124,243,.25);border-color:var(--accent);background:var(--card)}

  button.calc{
    width:100%;padding:14px;margin-top:18px;border-radius:12px;border:none;
    background:var(--accent);color:#fff;font-weight:700;cursor:pointer;font-size:16px;
  }
  button.calc:hover{filter:brightness(.95)}

  #result{
    margin-top:16px;padding:14px;border-radius:8px;background:var(--result-bg);
    border-left:4px solid var(--accent);min-height:48px;color:var(--text);
  }

  /* progress bar */
  .progress-wrap{margin-top:12px}
  .progress-track{
    width:100%;height:14px;background:#dfe3ef;border-radius:999px;overflow:hidden;
  }
  .progress-fill{
    height:100%;width:0%;background:var(--bar-red);transition:width .4s ease, background-color .25s ease;
    display:flex;align-items:center;justify-content:flex-end;padding-right:8px;color:#000;font-weight:700;
  }
  .progress-text{font-size:12px;color:#000}

  .ad-box{
    margin-top:18px;
    text-align:center;
    border-radius:10px;
    overflow:hidden;
  }

  @media(max-width:360px){
    .container{padding:16px;border-radius:12px}
    h2{font-size:20px}
  }
</style>

<!-- Google AdSense script -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1089509587902763"
     crossorigin="anonymous"></script>

</head>
<body>

<div class="container">

  <!-- Theme toggle -->
  <button id="themeToggle" aria-pressed="false">‚òÄÔ∏è</button>

  <h2>Attendance Calculator</h2>

  <label for="total">Total Classes Conducted</label>
  <input id="total" type="number" min="0" placeholder="e.g. 120">

  <label for="attended">Classes Attended</label>
  <input id="attended" type="number" min="0" placeholder="e.g. 90">

  <label for="required">Minimum Required %</label>
  <input id="required" type="number" min="0" max="100" value="75">

  <button class="calc" id="calcBtn">Calculate Attendance</button>

  <div id="result" role="status" aria-live="polite"></div>

  <div class="progress-wrap" aria-hidden="false">
    <div class="progress-track" aria-hidden="true">
      <div id="progressFill" class="progress-fill" style="width:0%">
        <span id="progressText" class="progress-text"></span>
      </div>
    </div>
  </div>

  <!-- Google AdSense Ad -->
  <div class="ad-box">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1089509587902763"
         data-ad-slot="1289442612"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>

</div>

<script>
  const themeToggle = document.getElementById('themeToggle');

  themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    const dark = document.body.classList.contains('dark');
    themeToggle.setAttribute('aria-pressed', dark);
    themeToggle.textContent = dark ? "üåô" : "‚òÄÔ∏è";
  });

  const calcBtn = document.getElementById('calcBtn');
  const totalEl = document.getElementById('total');
  const attendedEl = document.getElementById('attended');
  const requiredEl = document.getElementById('required');
  const resultEl = document.getElementById('result');
  const progressFill = document.getElementById('progressFill');
  const progressText = document.getElementById('progressText');

  calcBtn.addEventListener('click', calculate);

  function calculate() {
    const total = Number(totalEl.value);
    const attended = Number(attendedEl.value);
    const req = Number(requiredEl.value);

    if (!Number.isFinite(total) || !Number.isFinite(attended) || !Number.isFinite(req)) {
      showMessage('Enter valid numbers.');
      updateProgress(0);
      return;
    }

    if (total <= 0) {
      showMessage('Total must be greater than 0.');
      updateProgress(0);
      return;
    }

    if (attended < 0 || attended > total) {
      showMessage('Attended must be between 0 and Total.');
      updateProgress(0);
      return;
    }

    if (req < 0 || req > 100) {
      showMessage('Required % must be between 0 and 100.');
      updateProgress(0);
      return;
    }

    const percent = (attended / total) * 100;
    const percentFixed = percent.toFixed(2);

    let msg = `<strong>Current Attendance:</strong> ${percentFixed}%<br/>`;

    if (percent < req) {
      const needed = Math.ceil(((req/100) * total - attended) / (1 - req/100));
      msg += `You must attend the next <strong>${needed}</strong> class(es) to reach <strong>${req}%</strong>.`;
    } else {
      const canMiss = Math.floor(attended / (req/100) - total);
      msg += `You can miss <strong>${Math.max(0, canMiss)}</strong> more class(es) and stay at/above <strong>${req}%</strong>.`;
    }

    showMessage(msg);
    updateProgress(percent);
  }

  function showMessage(html) {
    resultEl.innerHTML = html;
  }

  function clamp(v, a = 0, b = 100) {
    return Math.max(a, Math.min(b, v));
  }

  function updateProgress(percent) {
    const p = clamp(percent, 0, 100);
    progressFill.style.width = p + '%';

    if (p < 50) {
      progressFill.style.backgroundColor = getComputedStyle(document.documentElement).getPropertyValue('--bar-red').trim();
    } else if (p < 75) {
      progressFill.style.backgroundColor = getComputedStyle(document.documentElement).getPropertyValue('--bar-yellow').trim();
    } else {
      progressFill.style.backgroundColor = getComputedStyle(document.documentElement).getPropertyValue('--bar-green').trim();
    }

    progressText.textContent = p.toFixed(0) + '%';
  }

  updateProgress(0);
</script>
</body>
</html>
